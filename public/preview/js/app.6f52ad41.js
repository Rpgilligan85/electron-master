(function(t){function e(e){for(var a,i,c=e[0],s=e[1],u=e[2],d=0,f=[];d<c.length;d++)i=c[d],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&f.push(n[i][0]),n[i]=0;for(a in s)Object.prototype.hasOwnProperty.call(s,a)&&(t[a]=s[a]);l&&l(e);while(f.length)f.shift()();return o.push.apply(o,u||[]),r()}function r(){for(var t,e=0;e<o.length;e++){for(var r=o[e],a=!0,c=1;c<r.length;c++){var s=r[c];0!==n[s]&&(a=!1)}a&&(o.splice(e--,1),t=i(i.s=r[0]))}return t}var a={},n={app:0},o=[];function i(e){if(a[e])return a[e].exports;var r=a[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=a,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(r,a,function(e){return t[e]}.bind(null,a));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],s=c.push.bind(c);c.push=e,c=c.slice();for(var u=0;u<c.length;u++)e(c[u]);var l=s;o.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},2385:function(t,e,r){},"56d7":function(t,e,r){"use strict";r.r(e);r("e260"),r("e6cf"),r("cca6"),r("a79d");var a=r("2b0e"),n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.dataLoaded?r("v-app",[r("v-container",{staticClass:"pa-0",attrs:{fluid:""}},[r("v-toolbar",{attrs:{color:"#222",dark:""}},[r("v-toolbar-title",[t._v(" "+t._s(t.config.details.headerTitle)+" ")])],1),r("v-row",{attrs:{"no-gutters":""}},[r("v-col",[r("div",{attrs:{id:"timeslider-container"}},[t.dataLoaded?r("TimeSlider"):t._e()],1),r("Map",{attrs:{data:t.mapData}})],1)],1)],1)],1):t._e()},o=[],i=(r("a4d3"),r("4de4"),r("e439"),r("dbb4"),r("b64b"),r("159b"),r("ade3")),c=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"map"}},[r("l-map",{staticStyle:{height:"100%",width:"100%"},attrs:{zoom:t.zoom,center:t.center}},[r("l-tile-layer",{attrs:{url:t.url}}),r("Vue2LeafletMarkerCluster",{ref:"clusterRef"},[r("LGeoJson",{ref:"geojsonRef",attrs:{geojson:t.filteredData,options:t.options}})],1)],1)],1)},s=[],u=r("2699"),l=r("a40a"),d=r("4e2b"),f=r("044a"),p=r("2f62"),b=r("ca9f"),h=r.n(b),m=(r("3ac1"),r("e11e")),g=r.n(m);function O(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function v(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?O(Object(r),!0).forEach((function(e){Object(i["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var y={name:"Map",components:{LMap:u["a"],LTileLayer:l["a"],LMarker:d["a"],LGeoJson:f["a"],Vue2LeafletMarkerCluster:h.a},props:["data","state"],data:function(){return{url:"http://{s}.tile.osm.org/{z}/{x}/{y}.png",zoom:3,center:[47.41322,-1.219482],bounds:null,mapLoaded:!1}},computed:v({},Object(p["c"])({filteredData:"dataLoader/filteredData"}),{options:function(){return{onEachFeature:this.onEachMarker()}}}),methods:{onEachMarker:function(){return function(t,e){var r=g.a.divIcon({html:'<div class="circle"></div>'});e.setIcon(r)}}},mounted:function(){console.log("map",this.filteredData)},watch:{filteredData:function(t){console.log("val",this.$refs.clusterRef.mapObject),this.$refs.clusterRef.mapObject.clearLayers(),this.$refs.clusterRef.mapObject.addLayers(this.$refs.geojsonRef.mapObject)}}},j=y,D=(r("894b"),r("2877")),w=Object(D["a"])(j,c,s,!1,null,null,null),P=w.exports,L=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"slider"}})},E=[],S=(r("d81d"),r("4e82"),r("d3b7"),r("6062"),r("3ca3"),r("ddb0"),r("2909")),_=r("e9fa"),M=r.n(_),T=(r("c0a8"),r("5a0c")),R=r.n(T);function F(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function k(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?F(Object(r),!0).forEach((function(e){Object(i["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):F(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var Y={name:"TimeSlider",components:{noUiSlider:M.a},data:function(){return{dates:null,sliderValue:null}},computed:k({},Object(p["e"])({mapData:function(t){return t.dataLoader.appData.csv.demo}}),{getDates:function(){var t=Object(S["a"])(new Set(this.mapData.map((function(t){return t.Date}))));return t.sort((function(t,e){return new Date(t)-new Date(e)}))}}),methods:k({},Object(p["d"])({SET_DATE_RANGE:"dataLoader/SET_DATE_RANGE"}),{initSlider:function(){var t=this;M.a.create(this.$el,{start:[1,7],connect:!0,step:1,range:{min:0,max:this.dates.length-1},tooltips:[this.prettyDates(),this.prettyDates()],pips:{mode:"count",density:this.dates.length/2,values:10,stepped:!0,format:{to:function(e){return R()(t.dates[Math.floor(e)]).format("M/D/YYYY")},from:function(e){return R()(t.dates[Math.floor(e)]).format("M/D/YYYY")}}},format:{to:function(t){return Math.floor(t)},from:function(t){return Math.floor(t)}}}),this.$el.noUiSlider.on("end",(function(e,r){t.updateValues(e,r)}))},filterPips:function(t,e){return t%2===1&&t>2||0===t||t===this.dates.length-1?1:0},timestamp:function(t){return new Date(t).getTime()},prettyDates:function(t){var e=this;return{to:function(t){return R()(e.dates[Math.floor(t)]).format("M/D/YYYY")}}},updateValues:function(t,e){var r,a;1===t.length?(r=this.dates[t[0]],this.sliderValue=r):(r=this.dates[t[0]],a=this.dates[t[1]],this.sliderValue=[r,a]),this.SET_DATE_RANGE([r,a]),console.log(this.sliderValue)}}),mounted:function(){this.dates=this.getDates,this.initSlider()}},x=Y,A=(r("5e86"),Object(D["a"])(x,L,E,!1,null,null,null)),G=A.exports;function $(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function C(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?$(Object(r),!0).forEach((function(e){Object(i["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):$(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var V={name:"App",components:{Map:P,TimeSlider:G},data:function(){return{}},computed:C({},Object(p["e"])({config:function(t){return t.config},mapData:function(t){return t.dataLoader.appData},dataLoaded:function(t){return t.dataLoader.dataLoaded}})),methods:C({},Object(p["b"])({loadData:"dataLoader/loadData"})),beforeMount:function(){for(var t in this.config.data)this.loadData(this.config.data[t])},mounted:function(){console.log(this.mapData)}},N=V,U=(r("5c0b"),Object(D["a"])(N,n,o,!1,null,null,null)),I=U.exports,z=(r("a9e3"),r("5698")),J={appData:{csv:{},geojson:{}},dataLoaded:!1,dateRange:[]},B={dataLoaded:function(t){return t.dataLoaded},filteredData:function(t){return t.appData.geojson.demo.filter((function(e){var r=new Date(e.properties.Date).getTime(),a=new Date(t.dateRange[0]).getTime(),n=new Date(t.dateRange[1]).getTime();if(r>=a&&r<=n)return console.log("run"),e}))}},q={loadCsvData:function(t,e){a["default"].set(t.appData.csv,e.id,e.data)},loadGeojsonData:function(t,e){a["default"].set(t.appData.geojson,e.id,e.data)},dataLoaded:function(t,e){t.dataLoaded=e},SET_DATE_RANGE:function(t,e){t.dateRange=e}},H={loadData:function(t,e){var r=t.commit,a=t.dispatch;z.csv(e.options.url).then((function(t){r("loadCsvData",{id:e.id,data:t}),a("createGeojson",{id:e.id,data:t,lat:e.options.lat,lng:e.options.lng}),r("dataLoaded",!0)}))},createGeojson:function(t,e){for(var r=t.commit,a=[],n=0;n<e.data.length;n++){var o=Number(e.data[n][e.lat]),i=Number(e.data[n][e.lng]);a[n]={type:"Feature",geometry:{type:"Point",coordinates:[i,o]},properties:e.data[n]}}console.log("geo",a),r("loadGeojsonData",{id:e.id,data:a})}},K={namespaced:!0,state:J,getters:B,actions:H,mutations:q};a["default"].use(p["a"]);var Q=new p["a"].Store({modules:{dataLoader:K},state:{config:config}}),W=r("ce5b"),X=r.n(W);r("bf40");a["default"].use(X.a);var Z=new X.a({theme:{themes:{light:{primary:"#01579B",secondary:"#006064",accent:"#E65100",error:"#FF5252",info:"#2196F3",success:"#4CAF50",warning:"#FFC107"},dark:{primary:"#01579B",secondary:"#006064",accent:"#E65100",error:"#FF5252",info:"#2196F3",success:"#4CAF50",warning:"#FFC107"}}}});r("d5e8"),r("5363"),r("6cc5");delete m["Icon"].Default.prototype._getIconUrl,m["Icon"].Default.mergeOptions({iconRetinaUrl:r("584d"),iconUrl:r("6397"),shadowUrl:r("e2b9")}),a["default"].config.productionTip=!1,new a["default"]({store:Q,vuetify:Z,render:function(t){return t(I)}}).$mount("#app")},"5c0b":function(t,e,r){"use strict";var a=r("9c0c"),n=r.n(a);n.a},"5e86":function(t,e,r){"use strict";var a=r("2385"),n=r.n(a);n.a},"894b":function(t,e,r){"use strict";var a=r("a8f9"),n=r.n(a);n.a},"9c0c":function(t,e,r){},a8f9:function(t,e,r){}});
//# sourceMappingURL=app.6f52ad41.js.map